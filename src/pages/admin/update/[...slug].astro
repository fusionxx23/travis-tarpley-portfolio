---
import RootLayout from "@/layouts/RootLayout.astro";
import Updater from "@/components/Blog/Updater.svelte";
import { getBlogFromSlug } from "@/libs/blogs/index";
import { type SelectBlog } from "@/libs/models/index.ts";
// export async function getStaticPaths() {
//   const blogs = await getBlogs();
//   if (blogs) {
//     return blogs.map((blog) => ({
//       params: { slug: blog.slug },
//       props: blog,
//     }));
//   } else {
//     console.error("FAILED TO PARSE BLOGS");
//     return [];
//   }
// }

const { slug } = Astro.params;
if (!slug) {
  return Astro.redirect("/");
}
const blog = await getBlogFromSlug({ slug });
export const prerender = false;
---

<RootLayout>
  <Updater blog={blog[0]} client:load />
</RootLayout>
