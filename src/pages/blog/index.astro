---
import RootLayout from "../../layouts/RootLayout.astro";
import Header from "../../components/Header.astro";
import FormattedDate from "../../components/FormattedDate.astro";
import { Image } from "astro:assets";
import { getBlogs } from "../../libs/blogs/index.ts";
const safeBlogs = await getBlogs();
---

<RootLayout>
  <div class="pt-[60px]"></div>
  <main class="flex justify-center">
    <section class="">
      <h1 class="text-3xl py-4 text-gray-100 font-semibold">
        My Latest Posts
      </h1>
      <ul class="space-y-8">
        {
          safeBlogs?.map((post) => (
            <li
              class="bg-black/30 w-[600px] border-2 border-purple-300/30
                rounded-lg p-4"
            >
              <a class="" href={`/blog/${post.slug}/`}>
                <div class="flex gap-x-4">
                  <div class="w-[150px]">
                    <Image
                      width={150}
                      height={100}
                      class="object-cover w-[150px] h-[100px]"
                      src={
                        "https://d21g8sblvruk6e.cloudfront.net/" +
                        post.imageKey
                      }
                      alt=""
                    />
                  </div>
                  <div class="flex flex-col justify-between gap-y-4">
                    <div>
                      <h4 class="text-3xl pb-1">
                        {post.title}
                      </h4>
                      <p class="text-gray-400 text-[14px]">
                        {post.description}
                        Lorem ipsum dolor sit, amet
                        consectetur adipisicing elit. Facere
                      </p>
                    </div>
                    <p class="text-gray-300 text-right text-sm">
                      <h4>
                        {Intl.DateTimeFormat("en-US", {
                          year: "numeric",
                          month: "long",
                          day: "numeric",
                        }).format(
                          new Date(
                            parseInt(post.createdAt),
                          ),
                        )}
                      </h4>
                    </p>
                  </div>
                </div>
              </a>
            </li>
          ))
        }
      </ul>
    </section>
  </main>
</RootLayout>

<Header />
