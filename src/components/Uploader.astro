---
interface Props {
  id: string;
}
---

<div class="flex justify-center">
  <div>
    <form
      action="/actions/upload"
      method="post"
      enctype="multipart/form-data"
      class="space-y-2"
    >
      <div>
        <div>
          <label for="{`filename-input-${id}`}">Title</label
          >
        </div>
        <input
          type="text"
          class="text-black p-2"
          name="title"
          id="title"
          required
        />
      </div>

      <div>
        <div>
          <label for="title">Description</label>
        </div>
        <input
          type="text"
          class="text-black p-2"
          name="description"
          id="description"
          required
        />
      </div>
      <div>
        <div>
          <label for="blog">Blog Post</label>
        </div>
        <textarea
          class="text-black p-2 h-[200px] w-[400px]"
          name="blog"
          id="blog"
          required></textarea>
      </div>
      <div>
        <label for="file">Thumbnail</label>
        <input
          class="text-black"
          type="file"
          name="file"
          required
          id="file"
          accept="image/png, image/jpeg"
        />
      </div>

      <button
        type="submit"
        class="border p-2 hover:bg-purple-500 hover:border-black
          hover:text-black"
      >
        Upload Blog Post
        <!-- <input type="submit" value="Upload image" /> -->
      </button>
    </form>
    <div class="w-full flex justify-center pt-4"></div>
  </div>
</div>

<script>
  const form = document.querySelector("form")!;

  form.addEventListener("submit", async (event) => {
    event.preventDefault();
    const formData = new FormData(form);
    const response = await fetch(form.action, {
      method: form.method,
      body: formData,
    });

    if (!response.ok) {
      console.error("Failed to upload image");
    }
    console.log(response);
  });
</script>
